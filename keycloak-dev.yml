keycloak:
  container_name: keycloak
  image: jboss/keycloak:3.3.0.Final
  ports:
    - 9080:9080
    - 9443:9443
    - 10990:10990
  links:
  - maildev
  volumes:
    - ./realm-config:/opt/jboss/keycloak/realm-config
    - ./config/keycloak.env:/etc/secrets/keycloak.env
    - ./themes/keycloak/:/opt/jboss/keycloak/themes/keycloak/
    - ./themes/my-keycloak/:/opt/jboss/keycloak/themes/my-keycloak/
  environment:
      - KEYCLOAK_USER=admin
      - KEYCLOAK_PASSWORD=admin
  command: ["-b", "0.0.0.0", "-Dkeycloak.migration.action=import", "-Dkeycloak.migration.provider=dir", "-Dkeycloak.migration.dir=/opt/jboss/keycloak/realm-config", "-Dkeycloak.migration.strategy=OVERWRITE_EXISTING", "-Djboss.socket.binding.port-offset=1000"]

maildev:
    container_name: maildev
    image: djfarrelly/maildev:1.0.0-rc2
    ports:
      - "8081:80"
      - "25"
